   <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>The Health Express</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect rx='20' width='100' height='100' fill='%234CAF50'/><text x='50' y='60' font-size='50' text-anchor='middle' fill='white' font-family='Arial'>H</text></svg>">
<link rel="stylesheet" href="style.css">
      <style>
  :root{
    --green:#16a34a;
    --green-dark:#0f8a3b;
    --muted:#f2f7f3;
    --card-shadow: 0 6px 18px rgba(0,0,0,0.12);
    --pill-shadow: 0 8px 20px rgba(0,0,0,0.18);
  }
  *{box-sizing:border-box}
  body{font-family:Inter, system-ui, Arial; margin:0; background:linear-gradient(180deg,#f4fff6 0%, #f2f2f2 100%);}
  header{background:var(--green); color:white; padding:18px 16px; display:flex;align-items:center;gap:12px;position:sticky;top:0;z-index:50}
  .logo {display:flex;align-items:center;gap:10px}
  .logo svg{width:42px;height:42px}
  .brand {font-weight:700;font-size:20px;line-height:1}
  .subtitle {font-size:12px;opacity:.95}
  .header-right{margin-left:auto;display:flex;gap:10px;align-items:center}
  .time-bubble{background:rgba(255,255,255,0.12);padding:8px 12px;border-radius:12px;font-weight:600}
  .searchbar{margin:12px 16px;display:flex;gap:8px;align-items:center}
  .searchbar input{flex:1;padding:12px;border-radius:999px;border:0;outline:0;background:white;box-shadow:0 4px 12px rgba(0,0,0,0.06)}
  .hero{background:var(--green); color:white;padding:20px;border-radius:16px;margin:12px 16px;box-shadow:var(--card-shadow);display:flex;align-items:center;gap:16px}
  .hero h1{margin:0;font-size:28px}
  .categories{display:flex;gap:12px;margin:12px 16px;overflow:auto;padding-bottom:8px}
  .cat {background:white;padding:8px 14px;border-radius:999px;box-shadow:0 6px 14px rgba(0,0,0,0.06);white-space:nowrap}
  .menu-section{margin:12px 16px}
  .menu-title{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px}
  .card{background:white;border-radius:12px;overflow:hidden;box-shadow:var(--card-shadow);position:relative}
  .card img{width:100%;height:140px;object-fit:cover;display:block}
  .card .body{padding:12px}
  .card h4{margin:0 0 6px;font-size:16px}
  .meta{font-size:13px;color:#444;margin-bottom:8px}
  .price{font-weight:700;font-size:16px;margin-bottom:8px}
  .badge{position:absolute;left:12px;top:12px;background:#fff;padding:6px 8px;border-radius:8px;font-weight:700;box-shadow:0 6px 12px rgba(0,0,0,0.12)}
  .add-btn{position:absolute;right:12px;bottom:12px;background:linear-gradient(180deg,var(--green),var(--green-dark));color:white;padding:10px 12px;border-radius:10px;border:none;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.18)}
  /* Floating cart pill */
  .cart-pill{position:fixed;left:50%;transform:translateX(-50%);bottom:24px;background:var(--green);color:white;padding:14px 20px;border-radius:40px;display:flex;align-items:center;gap:12px;box-shadow:var(--pill-shadow);z-index:70;min-width:220px;cursor:pointer}
  .cart-pill img{width:40px;height:40px;border-radius:6px;object-fit:cover}
  .cart-info{font-weight:700}
  .cart-sub{font-size:12px;opacity:.95}
  /* Cart modal */
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.4);display:none;align-items:flex-end;z-index:80}
  .cart-modal{background:white;border-radius:16px 16px 0 0;padding:16px;max-height:80vh;overflow:auto;width:100%}
  .cart-row{display:flex;gap:12px;align-items:center;padding:8px 0;border-bottom:1px solid #eee}
  .cart-row img{width:64px;height:64px;object-fit:cover;border-radius:8px}
  .qty{display:flex;gap:8px;align-items:center}
  .qty button{padding:4px 8px;border-radius:6px;border:1px solid #ddd;background:white}
  .checkout-block{margin-top:12px}
  .form-row{display:flex;gap:8px}
  .form-row input{flex:1}
  .primary{background:var(--green);color:white;border:none;padding:10px 12px;border-radius:8px;font-weight:700;cursor:pointer}
  /* login modal */
  .auth-modal{background:white;border-radius:12px;padding:16px;width:360px;max-width:95%;margin:auto}
  .center{text-align:center}
  .small{font-size:13px;color:#666}
  @media(min-width:900px){
    .cart-pill{left:auto;right:28px;transform:none}
    .cart{right:40px}
  }
</style>
</head>
<body>

<header>
  <div class="logo">
    <!-- simple SVG logo -->
    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
      <rect rx="18" width="100" height="100" fill="#fff" opacity="0.08"/>
      <path d="M30 65 C30 55, 40 52, 50 52 C60 52, 70 55, 70 65 L70 72 L30 72 Z" fill="#fff" opacity="0.9"/>
      <circle cx="50" cy="35" r="18" fill="#fff" />
      <text x="50" y="40" text-anchor="middle" font-size="20" font-family="Arial" fill="#16a34a" font-weight="700">H</text>
    </svg>
    <div>
      <div class="brand">The Health Express</div>
      <div class="subtitle">Healthy & quick bites • Open now</div>
    </div>
  </div>

  <div class="header-right">
    <div class="time-bubble">Earliest • 18 mins</div>
    <div style="width:40px;height:40px;border-radius:10px;background:#fff;color:var(--green);display:flex;align-items:center;justify-content:center;font-weight:700">₹</div>
  </div>
</header>

<div class="searchbar">
  <input id="search" placeholder="Search for samosa, chai and more..." />
  <button onclick="toggleVeg()">VEG</button>
</div>

<div class="hero">
  <div>
    
  <img src="https://i.ibb.co/0tK9V6X/oj.jpg" style="width:90px;height:90px;border-radius:12px;object-fit:cover;margin-left:auto" alt="">
</div>

<div class="categories">
  <div class="cat">Highly Reordered</div>
  <div class="cat">Newly Launched</div>
  <div class="cat">Veg</div>
  <div class="cat">Non-Veg</div>
  <div class="cat">Discounts</div>
</div>

<!-- Menu sections -->
<div id="menuContainer">
  <section class="menu-section">
    <div class="menu-title">
      <h3>Starters</h3>
      <div class="small">Crispy & tasty</div>
    </div>
    <div class="cards" id="starters"></div>
  </section>

  <section class="menu-section">
    <div class="menu-title">
      <h3>Main Course</h3>
      <div class="small">Healthy mains</div>
    </div>
    <div class="cards" id="maincourse"></div>
  </section>

  <section class="menu-section">
    <div class="menu-title">
      <h3>Beverages</h3>
      <div class="small">Fresh & natural</div>
    </div>
    <div class="cards" id="beverages"></div>
  </section>

  <section class="menu-section">
    <div class="menu-title">
      <h3>Desserts</h3>
      <div class="small">Sweet endings</div>
    </div>
    <div class="cards" id="desserts"></div>
  </section>
</div>

<!-- Floating cart pill -->
<div class="cart-pill" id="cartPill" onclick="openCart()">
  <img id="pillImg" src="https://i.ibb.co/9pBmmGd/paneerwrap.jpg" alt="">
  <div>
    <div class="cart-info" id="pillTitle">View cart</div>
    <div class="cart-sub" id="pillSub">0 items • 0 mins</div>
  </div>
</div>

<!-- Cart modal -->
<div class="modal-back" id="modalBack">
  <div class="cart-modal" id="cartModal">
    <div style="display:flex;align-items:center;justify-content:space-between">
      <h3>Your cart</h3>
      <button onclick="closeCart()" style="background:#eee;border-radius:8px;padding:8px;border:0">Close</button>
    </div>

    <div id="cartList" style="margin-top:12px"></div>

    <div style="margin-top:12px">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><strong>Total</strong></div>
        <div><strong>₹<span id="cartTotal">0</span></strong></div>
      </div>
      <div class="checkout-block">
        <!-- If not logged in, show login/signup -->
        <div id="authArea"></div>

        <!-- Checkout form (hidden until logged in) -->
        <div id="checkoutForm" style="display:none;margin-top:10px">
          <div style="font-weight:700;margin-bottom:6px">Delivery address</div>
          <input id="c_name" placeholder="Full name" />
          <input id="c_phone" placeholder="Phone number" />
          <input id="c_house" placeholder="House no / Street" />
          <input id="c_landmark" placeholder="Landmark (optional)" />
          <div class="form-row">
            <input id="c_city" placeholder="City" />
            <input id="c_state" placeholder="State" />
          </div>
          <input id="c_pincode" placeholder="Pin code" />
          <div style="margin-top:10px">
            <button class="primary" onclick="submitOrder()">Place order (Cash on delivery)</button>
          </div>
          <p id="orderOk" style="color:green;margin-top:8px"></p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- small auth modal template -->
<div id="authModal" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:90">
  <div class="auth-modal">
    <div id="authInner"></div>
  </div>
</div>

<script>
/* -------------------------------
   Sample menu data (images hosted)
   ------------------------------- */
const menu = [
  {category:"starters", id:1, name:"Classic French Fries", price:119, img:"images/ff.png", badge:"Most Loved", tag:"Veg"},
  {category:"starters", id:2, name:"Crispy Paneer Strips", price:159, img:"images/ps.png", badge:"Dish of the day", tag:"Veg"},
  {category:"maincourse", id:3, name:"Grilled Chicken Salad", price:250, img:"images/cs.png", badge:"Highly reordered", tag:"Non-veg"},
  {category:"maincourse", id:4, name:"Dal Makhani", price:200, img:"images/dm.png", badge:"Healthy", tag:"Veg"},
  {category:"beverages", id:5, name:"Fresh Orange Juice", price:100, img:"images/oj.png", badge:"New", tag:"Veg"},
  {category:"beverages", id:6, name:"Green Smoothie", price:120, img:"images/smoothie.png", badge:"Best Seller", tag:"Veg"},
  {category:"desserts", id:7, name:"Chocolate Brownie", price:90, img:"images/brownie.png", badge:"Sweet", tag:"Veg"},
  {category:"desserts", id:8, name:"Fruit Salad", price:80, img:"images/fruitsalad.png", badge:"Fresh", tag:"Veg"}
];

let cart = [];
let loggedUser = JSON.parse(localStorage.getItem('thehealth_user')||'null');

/* Render menu into categories */
function showMenu(){
  const byCat = {};
  menu.forEach(item => {
    if(!byCat[item.category]) byCat[item.category]=[];
    byCat[item.category].push(item);
  });
  for(const cat in byCat){
    const container = document.getElementById(cat);
    byCat[cat].forEach((it, idx)=>{
      const el = document.createElement('div');
      el.className = 'card';
      el.innerHTML = `
        <div class="badge">${it.badge}</div>
        <img src="${it.img}" alt="${it.name}" />
        <div class="body">
          <h4>${it.name}</h4>
          <div class="meta">${it.tag} • 15-20 mins</div>
          <div class="price">₹${it.price}</div>
          <button class="add-btn" onclick="addToCart(${it.id})">ADD</button>
        </div>`;
      container.appendChild(el);
    });
  }
}

/* Add item to cart */
function addToCart(id){
  const it = menu.find(m=>m.id===id);
  if(!it) return;
  cart.push({...it, uid:Date.now()+Math.random()});
  updateCartUI();
  // quick bump animation: change pill image/title
  document.getElementById('pillImg').src = it.img;
  document.getElementById('pillTitle').innerText = 'View cart';
}

/* Update floating pill and counters */
function updateCartUI(){
  const count = cart.length;
  const mins = 15 + Math.min(15, Math.floor(count*2)); // simple est
  document.getElementById('pillSub').innerText = `${count} item${count!==1?'s':''} • ${mins} mins`;
  document.getElementById('pillTitle').innerText = count? 'View cart':'Cart is empty';
  const anyImg = cart[cart.length-1]?.img || 'https://i.ibb.co/9pBmmGd/paneerwrap.jpg';
  document.getElementById('pillImg').src = anyImg;
}

/* Open cart modal; if not logged in show auth area */
function openCart(){
  document.getElementById('modalBack').style.display='flex';
  renderCartList();
  renderAuthArea();
}

/* Close cart */
function closeCart(){
  document.getElementById('modalBack').style.display='none';
  document.getElementById('orderOk').innerText='';
}

/* Render cart items inside modal */
function renderCartList(){
  const list = document.getElementById('cartList');
  list.innerHTML = '';
  if(cart.length===0){
    list.innerHTML = '<div style="padding:8px 0">No items in cart.</div>';
    document.getElementById('cartTotal').innerText = 0;
    return;
  }
  let total = 0;
  cart.forEach((c, idx)=>{
    total += c.price;
    const row = document.createElement('div');
    row.className = 'cart-row';
    row.innerHTML = `
      <img src="${c.img}" alt="">
      <div style="flex:1">
        <div style="font-weight:700">${c.name}</div>
        <div style="color:#666;font-size:13px">₹${c.price}</div>
      </div>
      <div style="text-align:right">
        <div class="qty">
          <button onclick="decrease(${idx})">-</button>
          <div id="q${idx}" style="padding:4px 8px;border-radius:6px">${1}</div>
          <button onclick="increase(${idx})">+</button>
        </div>
        <div style="margin-top:8px"><button onclick="removeItem(${idx})" style="background:#fff;border:1px solid #eee;padding:6px;border-radius:6px">Remove</button></div>
      </div>
    `;
    list.appendChild(row);
  });
  document.getElementById('cartTotal').innerText = total;
}

/* Quantity control (simple approach: each cart entry is 1 item) */
function increase(i){
  // duplicate the item again
  cart.push({...cart[i], uid:Date.now()+Math.random()});
  renderCartList();
  updateCartUI();
}
function decrease(i){
  // remove one instance of same name
  const name = cart[i].name;
  const idx = cart.findIndex(x=>x.name===name);
  if(idx>-1) cart.splice(idx,1);
  renderCartList();
  updateCartUI();
}
function removeItem(i){
  cart.splice(i,1);
  renderCartList();
  updateCartUI();
}

/* AUTH: simple signup/login stored in localStorage (demo only) */
function renderAuthArea(){
  const container = document.getElementById('authArea');
  container.innerHTML = '';
  if(isLogged()){
    container.innerHTML = `<div style="margin-bottom:10px">Signed in as <strong>${loggedUser.name}</strong> • <button onclick="logout()" style="background:#fff;padding:6px;border-radius:6px">Logout</button></div>`;
    document.getElementById('checkoutForm').style.display='block';
    // prefill checkout form
    document.getElementById('c_name').value = loggedUser.name;
    document.getElementById('c_phone').value = loggedUser.phone;
  } else {
    document.getElementById('checkoutForm').style.display='none';
    container.innerHTML = `
      <div style="display:flex;gap:8px">
        <button class="primary" onclick="showLogin()">Login</button>
        <button style="background:#fff;border:1px solid #ddd;padding:10px;border-radius:8px" onclick="showSignup()">Sign up</button>
      </div>
      <div class="small" style="margin-top:8px">You need to sign in to place orders</div>`;
  }
}

function isLogged(){ return !!loggedUser; }

function showSignup(){
  document.getElementById('authInner').innerHTML = `
    <div class="center"><h3>Create account</h3></div>
    <input id="su_name" placeholder="Full name"/>
    <input id="su_phone" placeholder="Phone number"/>
    <input id="su_pass" type="password" placeholder="Password"/>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button class="primary" onclick="signup()">Create</button>
      <button onclick="closeAuth()">Cancel</button>
    </div>
    <div class="small center" style="margin-top:8px">We store your account only in this browser (demo)</div>
  `;
  document.getElementById('authModal').style.display='flex';
}
function showLogin(){
  document.getElementById('authInner').innerHTML = `
    <div class="center"><h3>Login</h3></div>
    <input id="li_phone" placeholder="Phone number"/>
    <input id="li_pass" type="password" placeholder="Password"/>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button class="primary" onclick="login()">Login</button>
      <button onclick="closeAuth()">Cancel</button>
    </div>
    <div class="small center" style="margin-top:8px">If you don't have account create one</div>
  `;
  document.getElementById('authModal').style.display='flex';
}
function closeAuth(){ document.getElementById('authModal').style.display='none'; }

function signup(){
  const name = document.getElementById('su_name').value.trim();
  const phone = document.getElementById('su_phone').value.trim();
  const pass = document.getElementById('su_pass').value.trim();
  if(!name||!phone||!pass){ alert('Please fill all'); return; }
  const users = JSON.parse(localStorage.getItem('thehealth_users')||'[]');
  if(users.find(u=>u.phone===phone)){ alert('Phone already used'); return; }
  users.push({name,phone,pass});
  localStorage.setItem('thehealth_users', JSON.stringify(users));
  loggedUser = {name,phone};
  localStorage.setItem('thehealth_user', JSON.stringify(loggedUser));
  closeAuth();
  renderAuthArea();
}

function login(){
  const phone = document.getElementById('li_phone').value.trim();
  const pass = document.getElementById('li_pass').value.trim();
  const users = JSON.parse(localStorage.getItem('thehealth_users')||'[]');
  const u = users.find(x=>x.phone===phone && x.pass===pass);
  if(!u){ alert('Invalid credentials'); return; }
  loggedUser = {name:u.name, phone:u.phone};
  localStorage.setItem('thehealth_user', JSON.stringify(loggedUser));
  closeAuth();
  renderAuthArea();
}

function logout(){
  loggedUser=null;
  localStorage.removeItem('thehealth_user');
  renderAuthArea();
}

/* Submit order to backend */
async function submitOrder(){
  // validate form
  const name = document.getElementById('c_name').value.trim();
  const phone = document.getElementById('c_phone').value.trim();
  const house = document.getElementById('c_house').value.trim();
  const city = document.getElementById('c_city').value.trim();
  const state = document.getElementById('c_state').value.trim();
  const pincode = document.getElementById('c_pincode').value.trim();
  if(!name || !phone || !house || !city || !state || !pincode || cart.length===0){
    alert('Please fill all required fields and have items in cart');
    return;
  }
  const order = {
    user: loggedUser || {name, phone},
    address: { house, city, state, pincode, landmark: document.getElementById('c_landmark').value.trim() },
    items: cart.map(i=>({id:i.id,name:i.name,price:i.price})),
    total: cart.reduce((a,b)=>a+b.price,0),
    payment: 'COD',
    createdAt: new Date().toISOString()
  };
  // call server
  try{
    const resp = await fetch('/api/order', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(order)});
    const j = await resp.json();
    if(j.status === 'success'){
      document.getElementById('orderOk').innerText = 'Order placed successfully! Order id: ' + (j.id || '');
      cart = [];
      renderCartList();
      updateCartUI();
      // hide form
      setTimeout(()=>{ closeCart(); alert('Order received! We will deliver soon.'); }, 1200);
    } else {
      alert('Error placing order');
    }
  } catch(err){
    console.error(err);
    alert('Network error');
  }
}

/* Utilities */
function toggleVeg(){ alert('Veg filter - demo'); }

/* init */
showMenu();
updateCartUI();

</script>
</body>
  </html>
  
