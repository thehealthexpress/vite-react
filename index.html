<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Health Express</title>
<style>
body { font-family: Arial; margin:0; padding:0; background:#f2f2f2; }
header { background:#4CAF50; color:white; padding:20px; text-align:center; }
h2 { margin-left:20px; }
.menu-category { padding:10px 20px; }
.menu { display:flex; flex-wrap:wrap; justify-content:center; }
.item { background:white; border:1px solid #ccc; border-radius:5px; margin:10px; padding:10px; width:180px; text-align:center; box-shadow: 0 2px 6px rgba(0,0,0,0.15);}
.item img { width:100%; height:120px; object-fit:cover; border-radius:5px; }
.cart { position:fixed; top:20px; right:20px; border:1px solid #333; padding:10px; background:white; width:300px; max-height:90vh; overflow-y:auto; box-shadow:0 4px 8px rgba(0,0,0,0.2);}
button { padding:5px 10px; margin-top:5px; cursor:pointer; background:#4CAF50; color:white; border:none; border-radius:3px; }
button:hover{background:#45a049;}
input, select { width:100%; margin:5px 0; padding:5px; box-sizing:border-box; }
</style>
</head>
<body>

<header>
  <h1>The Health Express</h1>
</header>

<!-- Menu categories -->
<div class="menu-category">
  <h2>Starters</h2>
  <div class="menu" id="starters"></div>
</div>

<div class="menu-category">
  <h2>Main Course</h2>
  <div class="menu" id="maincourse"></div>
</div>

<div class="menu-category">
  <h2>Beverages</h2>
  <div class="menu" id="beverages"></div>
</div>

<div class="menu-category">
  <h2>Desserts</h2>
  <div class="menu" id="desserts"></div>
</div>

<!-- Cart and Checkout -->
<div class="cart">
  <h3>Cart</h3>
  <div id="cartItems">No items yet</div>
  <p>Total: ₹<span id="total">0</span></p>

  <h4>Checkout</h4>
  <input type="text" id="name" placeholder="Full Name">
  <input type="text" id="phone" placeholder="Phone Number">
  <input type="text" id="house" placeholder="House No / Street">
  <input type="text" id="landmark" placeholder="Landmark">
  <input type="text" id="city" placeholder="City">
  <input type="text" id="state" placeholder="State">
  <input type="text" id="pincode" placeholder="Pin Code">

  <button onclick="placeOrder()">Place Order (COD)</button>
  <p id="orderMsg" style="color:green;"></p>
</div>

<script>
// Menu items with category and image
const menu = [
  {category:"starters", name:"Grilled Chicken Salad", price:250, img:"https://i.ibb.co/7Y9yZ6H/salad.jpg"},
  {category:"starters", name:"Veg Spring Roll", price:120, img:"https://i.ibb.co/3mj7V7r/springroll.jpg"},
  {category:"maincourse", name:"Quinoa Bowl", price:200, img:"https://i.ibb.co/2NfYdYk/quinoa.jpg"},
  {category:"maincourse", name:"Paneer Wrap", price:180, img:"https://i.ibb.co/9pBmmGd/paneerwrap.jpg"},
  {category:"beverages", name:"Fresh Orange Juice", price:100, img:"https://i.ibb.co/0tK9V6X/oj.jpg"},
  {category:"beverages", name:"Green Smoothie", price:120, img:"https://i.ibb.co/4Z1V7dK/smoothie.jpg"},
  {category:"desserts", name:"Chocolate Brownie", price:90, img:"https://i.ibb.co/fdB1JkT/brownie.jpg"},
  {category:"desserts", name:"Fruit Salad", price:80, img:"https://i.ibb.co/5v7f6Zr/fruitsalad.jpg"}
];

const cart = [];

function showMenu(){
  menu.forEach((item, index)=>{
    const itemDiv = document.createElement('div');
    itemDiv.className = 'item';
    itemDiv.innerHTML = `<img src="${item.img}" alt="${item.name}">
    <h4>${item.name}</h4>
    <p>₹${item.price}</p>
    <button onclick="addToCart(${index})">Add to Cart</button>`;
    document.getElementById(item.category).appendChild(itemDiv);
  });
}

function addToCart(index){
  cart.push(menu[index]);
  updateCart();
}

function updateCart(){
  const cartItemsDiv = document.getElementById('cartItems');
  let total = 0;
  if(cart.length===0){ cartItemsDiv.innerHTML="No items yet"; }
  else{
    cartItemsDiv.innerHTML = "";
    cart.forEach(i=>{
      cartItemsDiv.innerHTML += `<div>${i.name} - ₹${i.price}</div>`;
      total += i.price;
    });
  }
  document.getElementById('total').innerText = total;
}

async function placeOrder(){
  const name = document.getElementById('name').value.trim();
  const phone = document.getElementById('phone').value.trim();
  const house = document.getElementById('house').value.trim();
  const landmark = document.getElementById('landmark').value.trim();
  const city = document.getElementById('city').value.trim();
  const state = document.getElementById('state').value.trim();
  const pincode = document.getElementById('pincode').value.trim();

  if(!name || !phone || !house || !city || !state || !pincode || cart.length===0){
    alert("Please fill all required fields and add items to cart!");
    return;
  }

  const orderData = {
    name, phone, address:{house, landmark, city, state, pincode},
    items: cart,
    total: cart.reduce((a,b)=>a+b.price,0)
  };

  try{
    const response = await fetch('/api/order', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(orderData)
    });
    const result = await response.json();
    if(result.status==="success"){
      document.getElementById('orderMsg').innerText = "Order placed successfully!";
      cart.length=0;
      updateCart();
      document.getElementById('name').value='';
      document.getElementById('phone').value='';
      document.getElementById('house').value='';
      document.getElementById('landmark').value='';
      document.getElementById('city').value='';
      document.getElementById('state').value='';
      document.getElementById('pincode').value='';
    } else {
      alert("Error placing order!");
    }
  }catch(err){
    alert("Error connecting to server!");
  }
}

showMenu();
</script>

</body>
  </html>

